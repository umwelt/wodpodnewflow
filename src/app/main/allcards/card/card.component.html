<div id="card" class="page-layout carded fullwidth inner-scroll">

  <!-- CENTER -->
  <div class="center">
    <div class="mb-24 UiSetter" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">
      <form class="mat-card mat-elevation-z4 p-24 mr-24" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" name="form"
        [formGroup]="form">
        <div class="h2 mb-24">Card</div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name">
          </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Orientation</mat-label>
            <input matInput formControlName="orientation">
          </mat-form-field>
        </div>

        <div formArrayName="nutrients" *ngFor="let nutrients of form.get('nutrients')['controls']; let i = index" class="form-group">
          <div [formGroupName]="i">
            <div class="form-group" class="row cols-md-12">
              <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                <mat-form-field appearance="outline" fxFlex="90">
                  <mat-label>Nutrients</mat-label>
                  <mat-select (selectionChange)="onChange($event.value)" placeholder="Nutrients" formControlName="name"
                    [compareWith]="compareFn">
                    <mat-option *ngFor="let nutrient of nutrientsdata" [value]="nutrient">{{nutrient.name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                <mat-form-field appearance="outline" fxFlex="90">
                  <mat-label>Percentage</mat-label>
                  <input type="number" matInput formControlName="percentage">
                </mat-form-field>
              </div>
              <mat-icon class="deleteBtn" *ngIf="i==0" title="Delete"></mat-icon>
              <mat-icon class="deleteBtn" *ngIf="i>0" title="Delete" (click)="removeItems(i)">remove_circle</mat-icon>
            </div>
          </div>
        </div>
        <a mat-mini-fab color="primary" class="editBtn" style="font-size:large;margin-bottom: 2%;" (click)="addItems()">+</a>


        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Inserted</mat-label>
            <input matInput formControlName="inserted">
          </mat-form-field>
        </div>

        <input hidden (change)="pushFile($event)" type="file" #fileInput />
        <div class="file-uploader">
          <a *ngIf="!imgsrc" mat-mini-fab color="primary" class="add-file-button" (click)="fileInput.click();pushFile($event)"
            aria-label="Add Image File" [@animate]="{value:'*', params:{delay:'300ms',scale:'0.2'}}">
            <mat-icon>add_a_photo</mat-icon>
          </a>
          <a *ngIf="imgsrc" mat-mini-fab color="warn" class="remove-file-button" (click)="popFile(imgsrc)" aria-label="Remove Image File"
            [@animate]="{value:'*', params:{delay:'300ms',scale:'0.2'}}">
            <mat-icon>remove</mat-icon>
          </a>
          <img *ngIf="imgsrc" [src]="imgsrc" class="imgSetter" (dblclick)="popFile(imgsrc)" />
        </div>

        <div class="label" fxLayout="row" fxLayoutAlign="space-between center" fxFlex="1 0 auto">
          <span> Liked : </span>
          <mat-slide-toggle formControlName="liked"></mat-slide-toggle>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Scientific Name</mat-label>
            <input matInput formControlName="scientific_name">
          </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Benefits</mat-label>
            <mat-select placeholder="Benefits" formControlName="benefits" multiple [compareWith]="compareFn">
              <mat-option *ngFor="let benefit of benefitsdata" [value]="benefit">{{benefit.name}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Energy</mat-label>
            <input type="number" matInput formControlName="energy">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Fat</mat-label>
            <input type="number" matInput formControlName="fat">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Saturated</mat-label>
            <input type="number" matInput formControlName="saturated">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Trans</mat-label>
            <input type="number" matInput formControlName="trans">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Carbohydrate</mat-label>
            <input type="number" matInput formControlName="carbohydrate">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Fiber</mat-label>
            <input type="number" matInput formControlName="fiber">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Sugars</mat-label>
            <input type="number" matInput formControlName="sugars">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100">
            <mat-label>Protein</mat-label>
            <input type="number" matInput formControlName="protein">
          </mat-form-field>
        </div>

        <button mat-raised-button color="accent" class="submit-button" aria-label="Save" (click)="saveCard()">
          Save
        </button>
      </form>
    </div>
  </div>
</div>